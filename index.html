<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Music Player</title>
    <style>
        /* Font Modern */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }

        body {
            background-color: #000;
            font-family: 'Inter', sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background: radial-gradient(circle at 50% -20%, #2a2a2a, #000000 80%);
        }

        .player-card {
            position: relative;
            width: 380px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            padding: 40px 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
            transform-style: preserve-3d;
            transition: transform 0.1s ease-out;
            color: white;
            z-index: 10;
        }

        .art-container {
            width: 260px;
            height: 260px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.6);
            margin-bottom: 35px;
            position: relative;
            transform: translateZ(20px);
        }

        .album-art {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .player-card:hover .album-art {
            transform: scale(1.05);
        }

        .info {
            text-align: center;
            margin-bottom: 30px;
            transform: translateZ(30px);
        }

        .title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .artist {
            font-size: 1rem;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.6);
        }

        .visualizer-container {
            width: 100%;
            height: 30px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 3px;
            margin-bottom: 25px;
            transform: translateZ(10px);
            opacity: 0.8;
        }

        .bar {
            width: 4px;
            background: #fff;
            border-radius: 2px;
            height: 5px;
            transition: height 0.1s ease;
        }

        .progress-wrapper {
            width: 100%;
            margin-bottom: 25px;
            cursor: pointer;
            transform: translateZ(15px);
        }

        .progress-bg {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: #fff;
            border-radius: 2px;
            transition: width 0.1s linear;
        }

        .time-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.4);
            margin-top: 8px;
            font-weight: 500;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            transform: translateZ(25px);
        }

        .btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn:hover {
            color: #fff;
            transform: scale(1.1);
        }

        .btn-main {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #fff;
            color: #000;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        .btn-main:hover {
            transform: scale(1.05);
            background: #f0f0f0;
        }

        #start-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 0.6s ease;
        }

        .btn-start {
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            background: #fff;
            color: #000;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            letter-spacing: 1px;
            box-shadow: 0 0 20px rgba(255,255,255,0.2);
            transition: 0.3s;
        }

        .btn-start:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255,255,255,0.4);
        }

        .playlist {
            position: absolute;
            bottom: 30px;
            right: 30px;
            background: rgba(0,0,0,0.8);
            padding: 20px;
            border-radius: 15px;
            width: 250px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .playlist h3 {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .track-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            cursor: pointer;
            font-size: 0.9rem;
            color: #ccc;
            transition: 0.2s;
        }

        .track-row:hover { color: #fff; }
        .track-row.active { color: #fff; font-weight: 600; }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }
    </style>
</head>
<body>

    <!-- Tombol Awal -->
    <div id="start-overlay">
        <h2 style="color:white; margin-bottom:20px; font-weight:300;">MUSIC PLAYER</h2>
        <button class="btn-start" onclick="startApp()">TAP TO PLAY</button>
    </div>

    <!-- Kartu Player -->
    <div class="player-card" id="card">
        <div class="art-container">
            <img src="https://picsum.photos/seed/music/500/500" class="album-art" id="cover-img">
        </div>

        <div class="info">
            <div class="title" id="song-title">Song Title</div>
            <div class="artist" id="song-artist">Artist Name</div>
        </div>

        <div class="visualizer-container" id="visualizer"></div>

        <div class="progress-wrapper" id="progress-area">
            <div class="progress-bg">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="time-labels">
                <span id="curr-time">0:00</span>
                <span id="dur-time">0:00</span>
            </div>
        </div>

        <div class="controls">
            <button class="btn" onclick="prevTrack()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
            </button>
            <button class="btn btn-main" onclick="togglePlay()" id="play-pause-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" id="icon-play"><path d="M8 5v14l11-7z"/></svg>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" id="icon-pause" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
            </button>
            <button class="btn" onclick="nextTrack()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
            </button>
        </div>
    </div>

    <!-- Playlist -->
    <div class="playlist">
        <h3>Playlist</h3>
        <div id="playlist-items"></div>
    </div>

    <script>
        // --- DATA LAGU ---
        // PASTIKAN NAMA FILE DISINI SAMA PERSIS DENGAN FILE DI FOLDER KAMU!
        const tracks = [
            {
                title: "Bendera Setengah Tiang",
                artist: "Slank",
                cover: "https://picsum.photos/seed/slank1/500/500",
                src: "robot penyambut tamu.mp3" 
            },
            {
                title: "Slalom",
                artist: "Slank",
                cover: "https://picsum.photos/seed/slank2/500/500",
                src: "robot penyambut tamu.mp3"
            },
            {
                title: "Juwita",
                artist: "Slank",
                cover: "https://picsum.photos/seed/slank3/500/500",
                // Saya PERBAIKI typo .mp3.mp3 jadi .mp3 saja
                src: "robot penyambut tamu.mp3" 
            },
            {
                title: "Gak Welcome",
                artist: "Slank",
                cover: "https://picsum.photos/seed/slank4/500/500",
                src: "robot penyambut tamu.mp3"
            }
        ];

        let audio = new Audio();
        audio.crossOrigin = "anonymous";
        let currentIdx = 0;
        let isPlaying = false;
        let analyser, dataArray;
        
        const titleEl = document.getElementById('song-title');
        const artistEl = document.getElementById('song-artist');
        const coverEl = document.getElementById('cover-img');
        const playBtnIcon = document.getElementById('icon-play');
        const pauseBtnIcon = document.getElementById('icon-pause');
        const progressFill = document.getElementById('progress-fill');
        const progressArea = document.getElementById('progress-area');
        const currTimeEl = document.getElementById('curr-time');
        const durTimeEl = document.getElementById('dur-time');
        const visualizerContainer = document.getElementById('visualizer');
        const card = document.getElementById('card');

        // Setup Visualizer Bars
        const barCount = 30;
        for(let i=0; i<barCount; i++){
            let bar = document.createElement('div');
            bar.className = 'bar';
            visualizerContainer.appendChild(bar);
        }
        const bars = document.querySelectorAll('.bar');

        // --- TAMBAHAN DETEKSI ERROR ---
        audio.addEventListener('error', function(e) {
            console.error("Audio Error:", e);
            alert("GA BISA PLAY!\n\nNama file: " + audio.src + "\n\nPastikan file MP3 ada di folder yang sama dengan file HTML ini, dan penulisannya sama persis (Huruf Besar/Kecil berpengaruh).");
        });

        function startApp() {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            const audioCtx = new AudioContext();
            analyser = audioCtx.createAnalyser();
            const source = audioCtx.createMediaElementSource(audio);
            source.connect(analyser);
            analyser.connect(audioCtx.destination);
            analyser.fftSize = 64;
            dataArray = new Uint8Array(analyser.frequencyBinCount);

            document.getElementById('start-overlay').style.opacity = '0';
            setTimeout(() => document.getElementById('start-overlay').style.display = 'none', 600);

            const plContainer = document.getElementById('playlist-items');
            plContainer.innerHTML = ''; // Reset
            tracks.forEach((t, i) => {
                let row = document.createElement('div');
                row.className = 'track-row';
                if(i===0) row.classList.add('active');
                row.innerHTML = `<span>${t.title}</span>`;
                row.onclick = () => { loadTrack(i); playSong(); };
                plContainer.appendChild(row);
            });

            loadTrack(0);
            playSong();
            animateVisualizer();
        }

        function loadTrack(index) {
            currentIdx = index;
            const t = tracks[index];
            audio.src = t.src;
            titleEl.innerText = t.title;
            artistEl.innerText = t.artist;
            coverEl.src = t.cover;

            document.querySelectorAll('.track-row').forEach((el, i) => {
                el.classList.toggle('active', i === index);
            });
        }

        function playSong() {
            var playPromise = audio.play();
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    isPlaying = true;
                    playBtnIcon.style.display = 'none';
                    pauseBtnIcon.style.display = 'block';
                })
                .catch(error => {
                    console.log("Autoplay dicegah browser, coba klik manual.");
                });
            }
        }

        function pauseSong() {
            audio.pause();
            isPlaying = false;
            playBtnIcon.style.display = 'block';
            pauseBtnIcon.style.display = 'none';
        }

        function togglePlay() {
            if(isPlaying) pauseSong();
            else playSong();
        }

        function nextTrack() {
            let next = currentIdx + 1;
            if(next >= tracks.length) next = 0;
            loadTrack(next);
            playSong();
        }

        function prevTrack() {
            let prev = currentIdx - 1;
            if(prev < 0) prev = tracks.length - 1;
            loadTrack(prev);
            playSong();
        }

        audio.addEventListener('ended', nextTrack);

        audio.addEventListener('timeupdate', () => {
            const { duration, currentTime } = audio;
            if(isNaN(duration)) return;
            const progressPercent = (currentTime / duration) * 100;
            progressFill.style.width = `${progressPercent}%`;
            currTimeEl.innerText = formatTime(currentTime);
            durTimeEl.innerText = formatTime(duration);
        });

        progressArea.addEventListener('click', (e) => {
            const width = progressArea.clientWidth;
            const clickX = e.offsetX;
            audio.currentTime = (clickX / width) * audio.duration;
        });

        function formatTime(s) {
            let min = Math.floor(s / 60);
            let sec = Math.floor(s % 60);
            if (sec < 10) sec = `0${sec}`;
            return `${min}:${sec}`;
        }

        function animateVisualizer() {
            requestAnimationFrame(animateVisualizer);
            if(!analyser) return;
            analyser.getByteFrequencyData(dataArray);
            for(let i=0; i<barCount; i++) {
                const val = dataArray[i]; 
                const height = Math.max(4, (val / 255) * 25); 
                bars[i].style.height = `${height}px`;
                bars[i].style.opacity = 0.5 + (val/255)*0.5;
            }
        }

        document.addEventListener('mousemove', (e) => {
            const x = (window.innerWidth / 2 - e.pageX) / 40;
            const y = (window.innerHeight / 2 - e.pageY) / 40;
            card.style.transform = `rotateY(${x}deg) rotateX(${y}deg)`;
        });

        document.addEventListener('mouseleave', () => {
            card.style.transform = `rotateY(0deg) rotateX(0deg)`;
        });

    </script>
</body>
</html>
